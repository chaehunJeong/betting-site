// ë‹¤êµ­ì–´ ë²ˆì—­ ë°ì´í„°
const translations = {
    ko: {
        // í—¤ë”
        title: 'ğŸ² ëœë¤ ì„ íƒê¸°',
        subtitle: 'ì‚¬ì§„ì„ ì˜¬ë¦¬ë©´ í•˜ë‚˜ë¥¼ ê³¨ë¼ë“œë ¤ìš”!',

        // ì—…ë¡œë“œ ì„¹ì…˜
        uploadTitle: 'ì‚¬ì§„ì„ ì„ íƒí•´ì£¼ì„¸ìš”',
        uploadDescription: 'ìµœì†Œ 2ì¥, ìµœëŒ€ 20ì¥ê¹Œì§€ ê°€ëŠ¥í•´ìš”',
        btnGallery: 'ğŸ“ ê°¤ëŸ¬ë¦¬ì—ì„œ ì„ íƒ',
        btnCamera: 'ğŸ“· ì‚¬ì§„ ì´¬ì˜',

        // ë¯¸ë¦¬ë³´ê¸°
        uploadedPhotos: 'ì—…ë¡œë“œëœ ì‚¬ì§„',
        photosCount: 'ì¥',
        btnRandomSelect: 'ğŸ¯ ëœë¤ ì„ íƒí•˜ê¸°',

        // ê²°ê³¼ ì„¹ì…˜
        resultTitle: 'ğŸ‰ ì„ íƒëœ ê²°ê³¼',
        btnRetry: 'ğŸ”„ ë‹¤ì‹œ ë½‘ê¸°',
        btnNew: 'âœ¨ ìƒˆë¡œìš´ ì‚¬ì§„ìœ¼ë¡œ ì‹œì‘',

        // í‘¸í„°
        footerText: 'Â© 2026 ëœë¤ ì„ íƒê¸° | ê²°ì • ì¥ì•  í•´ê²°ì˜ ì‹œì‘',

        // ì•Œë¦¼ ë©”ì‹œì§€
        alertMaxImages: 'ìµœëŒ€ 20ì¥ê¹Œì§€ë§Œ ì—…ë¡œë“œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
        alertNotImage: 'ì€(ëŠ”) ì´ë¯¸ì§€ íŒŒì¼ì´ ì•„ë‹™ë‹ˆë‹¤.',
        alertFileSize: 'ì€(ëŠ”) 5MBë¥¼ ì´ˆê³¼í•©ë‹ˆë‹¤.',
        alertMinImages: 'ìµœì†Œ 2ì¥ ì´ìƒì˜ ì´ë¯¸ì§€ë¥¼ ì—…ë¡œë“œí•´ì£¼ì„¸ìš”.',
        selectingText: 'ì„ íƒ ì¤‘...',
    },
    en: {
        // Header
        title: 'ğŸ² Random Picker',
        subtitle: 'Upload photos and we\'ll pick one for you!',

        // Upload section
        uploadTitle: 'Select Your Photos',
        uploadDescription: 'Min 2 photos, Max 20 photos',
        btnGallery: 'ğŸ“ Choose from Gallery',
        btnCamera: 'ğŸ“· Take Photo',

        // Preview
        uploadedPhotos: 'Uploaded Photos',
        photosCount: 'photos',
        btnRandomSelect: 'ğŸ¯ Random Select',

        // Result section
        resultTitle: 'ğŸ‰ Selected Result',
        btnRetry: 'ğŸ”„ Try Again',
        btnNew: 'âœ¨ Start with New Photos',

        // Footer
        footerText: 'Â© 2026 Random Picker | Solve Your Decision Paralysis',

        // Alert messages
        alertMaxImages: 'You can upload up to 20 photos maximum.',
        alertNotImage: 'is not an image file.',
        alertFileSize: 'exceeds 5MB.',
        alertMinImages: 'Please upload at least 2 images.',
        selectingText: 'Selecting...',
    },
    ja: {
        // ãƒ˜ãƒƒãƒ€ãƒ¼
        title: 'ğŸ² ãƒ©ãƒ³ãƒ€ãƒ é¸æŠ',
        subtitle: 'å†™çœŸã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã¨ã€ä¸€ã¤ã‚’é¸ã³ã¾ã™ï¼',

        // ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã‚»ã‚¯ã‚·ãƒ§ãƒ³
        uploadTitle: 'å†™çœŸã‚’é¸æŠã—ã¦ãã ã•ã„',
        uploadDescription: 'æœ€å°2æšã€æœ€å¤§20æšã¾ã§',
        btnGallery: 'ğŸ“ ã‚®ãƒ£ãƒ©ãƒªãƒ¼ã‹ã‚‰é¸æŠ',
        btnCamera: 'ğŸ“· å†™çœŸã‚’æ’®ã‚‹',

        // ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼
        uploadedPhotos: 'ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã•ã‚ŒãŸå†™çœŸ',
        photosCount: 'æš',
        btnRandomSelect: 'ğŸ¯ ãƒ©ãƒ³ãƒ€ãƒ é¸æŠ',

        // çµæœã‚»ã‚¯ã‚·ãƒ§ãƒ³
        resultTitle: 'ğŸ‰ é¸æŠçµæœ',
        btnRetry: 'ğŸ”„ ã‚‚ã†ä¸€åº¦',
        btnNew: 'âœ¨ æ–°ã—ã„å†™çœŸã§é–‹å§‹',

        // ãƒ•ãƒƒã‚¿ãƒ¼
        footerText: 'Â© 2026 ãƒ©ãƒ³ãƒ€ãƒ é¸æŠ | æ±ºæ–­ã®æ‰‹åŠ©ã‘',

        // ã‚¢ãƒ©ãƒ¼ãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
        alertMaxImages: 'æœ€å¤§20æšã¾ã§ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã§ãã¾ã™ã€‚',
        alertNotImage: 'ã¯ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚',
        alertFileSize: 'ã¯5MBã‚’è¶…ãˆã¦ã„ã¾ã™ã€‚',
        alertMinImages: 'æœ€ä½2æšä»¥ä¸Šã®ç”»åƒã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦ãã ã•ã„ã€‚',
        selectingText: 'é¸æŠä¸­...',
    },
    zh: {
        // æ ‡é¢˜
        title: 'ğŸ² éšæœºé€‰æ‹©å™¨',
        subtitle: 'ä¸Šä¼ ç…§ç‰‡ï¼Œæˆ‘ä»¬å¸®ä½ é€‰ä¸€ä¸ªï¼',

        // ä¸Šä¼ éƒ¨åˆ†
        uploadTitle: 'è¯·é€‰æ‹©ç…§ç‰‡',
        uploadDescription: 'æœ€å°‘2å¼ ï¼Œæœ€å¤š20å¼ ',
        btnGallery: 'ğŸ“ ä»ç›¸å†Œé€‰æ‹©',
        btnCamera: 'ğŸ“· æ‹ç…§',

        // é¢„è§ˆ
        uploadedPhotos: 'å·²ä¸Šä¼ ç…§ç‰‡',
        photosCount: 'å¼ ',
        btnRandomSelect: 'ğŸ¯ éšæœºé€‰æ‹©',

        // ç»“æœéƒ¨åˆ†
        resultTitle: 'ğŸ‰ é€‰æ‹©ç»“æœ',
        btnRetry: 'ğŸ”„ é‡æ–°é€‰æ‹©',
        btnNew: 'âœ¨ ä¸Šä¼ æ–°ç…§ç‰‡',

        // é¡µè„š
        footerText: 'Â© 2026 éšæœºé€‰æ‹©å™¨ | è§£å†³é€‰æ‹©å›°éš¾',

        // æç¤ºä¿¡æ¯
        alertMaxImages: 'æœ€å¤šåªèƒ½ä¸Šä¼ 20å¼ ç…§ç‰‡ã€‚',
        alertNotImage: 'ä¸æ˜¯å›¾ç‰‡æ–‡ä»¶ã€‚',
        alertFileSize: 'è¶…è¿‡5MBã€‚',
        alertMinImages: 'è¯·è‡³å°‘ä¸Šä¼ 2å¼ å›¾ç‰‡ã€‚',
        selectingText: 'é€‰æ‹©ä¸­...',
    }
};

// í˜„ì¬ ì–¸ì–´ (ê¸°ë³¸ê°’: ë¸Œë¼ìš°ì € ì–¸ì–´ ë˜ëŠ” í•œêµ­ì–´)
let currentLanguage = localStorage.getItem('preferredLanguage') || getBrowserLanguage();

// ë¸Œë¼ìš°ì € ì–¸ì–´ ê°ì§€
function getBrowserLanguage() {
    const browserLang = navigator.language.toLowerCase();

    if (browserLang.startsWith('ko')) return 'ko';
    if (browserLang.startsWith('ja')) return 'ja';
    if (browserLang.startsWith('zh')) return 'zh';
    return 'en'; // ê¸°ë³¸ê°’: ì˜ì–´
}

// ì–¸ì–´ ë³€ê²½ í•¨ìˆ˜
function changeLanguage(lang) {
    if (!translations[lang]) {
        console.error(`Language ${lang} not supported`);
        return;
    }

    currentLanguage = lang;
    localStorage.setItem('preferredLanguage', lang);
    updatePageLanguage();
}

// í˜ì´ì§€ í…ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸
function updatePageLanguage() {
    const t = translations[currentLanguage];

    // í—¤ë”
    document.querySelector('.header h1').textContent = t.title;
    document.querySelector('.subtitle').textContent = t.subtitle;

    // ì—…ë¡œë“œ ì„¹ì…˜
    document.querySelector('.upload-area h2').textContent = t.uploadTitle;
    document.querySelector('.upload-area p').textContent = t.uploadDescription;
    document.querySelector('label[for="file-input"]').textContent = t.btnGallery;
    document.querySelector('label[for="camera-input"]').textContent = t.btnCamera;

    // ë¯¸ë¦¬ë³´ê¸°
    const previewTitle = document.querySelector('.preview-container h3');
    if (previewTitle) {
        const count = document.getElementById('image-count').textContent;
        previewTitle.innerHTML = `${t.uploadedPhotos} (<span id="image-count">${count}</span>${t.photosCount})`;
    }

    document.getElementById('select-btn').textContent = t.btnRandomSelect;

    // ê²°ê³¼ ì„¹ì…˜
    document.querySelector('.result-container h2').textContent = t.resultTitle;
    document.getElementById('retry-btn').textContent = t.btnRetry;
    document.getElementById('new-btn').textContent = t.btnNew;

    // í‘¸í„°
    document.querySelector('.footer p').textContent = t.footerText;

    // HTML lang ì†ì„± ì—…ë°ì´íŠ¸
    document.documentElement.lang = currentLanguage;

    // ì–¸ì–´ ì„ íƒ ë²„íŠ¼ í™œì„±í™” ìƒíƒœ ì—…ë°ì´íŠ¸
    document.querySelectorAll('.lang-btn').forEach(btn => {
        btn.classList.remove('active');
        if (btn.dataset.lang === currentLanguage) {
            btn.classList.add('active');
        }
    });
}

// ë²ˆì—­ í…ìŠ¤íŠ¸ ê°€ì ¸ì˜¤ê¸° í•¨ìˆ˜
function t(key) {
    return translations[currentLanguage][key] || key;
}

// ì´ˆê¸°í™”
document.addEventListener('DOMContentLoaded', () => {
    updatePageLanguage();
});
